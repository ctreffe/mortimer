{% extends "layout.html" %}

{% block content %}

<div class="content-section">
    <form method="POST" action="" class="needs-validation" novalidate>
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
            <legend class="border-bottom">{{ legend }}</legend>
            

            <div class="form-group">
                {{ form.title.label(class="form-control-label") }}
                {% if form.title.errors %}
                {{ form.title(class="form-control form-control-lg is-invalid", placeholder=experiment.title) }}

                <div class="invalid-feedback">
                    {% for error in form.title.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>

                {% else %}
                {{ form.title(class="form-control form-control-lg", placeholder=experiment.title) }}
                {% endif %}
            </div>

            <div class="form-group">
                    {{ form.description.label(class="form-control-label") }}
                    {% if form.description.errors %}
                        {{ form.description(class="form-control form-control-lg is-invalid") }}

                        <div class="invalid-feedback">
                            {% for error in form.description.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        
                    {% else %}
                    {{ form.description(class="form-control form-control-lg") }}
                    {% endif %}
            </div>

            <div class="form-group pt-1">
                    {{ form.password.label(class="form-control-label") }}
                    {% if form.password.errors %}
                        {{ form.password(class="form-control form-control-lg is-invalid") }}

                        <div class="invalid-feedback">
                            {% for error in form.password.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        
                    {% else %}
                    {{ form.password(class="form-control form-control-lg") }}
                    {% endif %}
                    <small id="passwordHelpBlock" class="form-text text-muted">
                      Here, you can protect access to your experiment with a password. Just leave this field empty if you want the experiment to be public.
                    </small>
            </div>

            <div class="form-group">
                {{ form.script.label(class="form-control-label") }}
                {% if form.script.errors %}
                {{ form.script(class="form-control form-control-sm is-invalid", placeholder=experiment.script) }}

                <div class="invalid-feedback">
                    {% for error in form.script.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>

                {% else %}
                {{ form.script(class="form-control form-control-sm", rows="30", placeholder=experiment.script) }}
                {% endif %}
            </div>

            <div class="form-group">
                    {{ form.version.label(class="form-control-label") }}*
                    {% if form.version.errors %}
                        {{ form.version(class="form-control form-control-lg is-invalid") }} <!-- , placeholder=form.version.label.text -->

                        <div class="invalid-feedback">
                            {% for error in form.version.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        
                    {% else %}
                    {{ form.version(class="form-control form-control-lg", placeholder=experiment.version) }}
                    {% endif %}
                    <small id="versionHelpBlock" class="form-text text-muted">
                      Changing the version number allows you to choose, for which versions of an experiment you want to download data. If you made substantial changes to your experiment, you should change the version.
                    </small>
                </div>


</fieldset>
<div class="form-group">
    {{ form.submit(class="btn btn-outline-primary")}}
    <a class="btn btn-outline-primary" href="{{ url_for('web_experiments.experiment', exp_title=experiment.title, username=experiment.author) }}">Back to Experiment</a>
</div>
</form>
</div>

{% endblock content %}