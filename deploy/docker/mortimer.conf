# General flask settings
import os


def _env_bool(key, default=False):
    raw = os.getenv(key)
    if raw is None:
        return default
    return raw.strip().lower() in {"1", "true", "yes", "on"}


SECRET_KEY = os.getenv("MORTIMER_SECRET_KEY")
PAROLE = os.getenv("MORTIMER_PAROLE")
DEBUG = True

ADMIN_MAIL = os.getenv("ADMIN_MAIL")

# MongoDB settings
MONGODB_SETTINGS = {
    "host": os.getenv("MORTIMER_MONGO_HOST", "localhost"),
    "port": int(os.getenv("MORTIMER_MONGO_PORT", "27017")),
    "db": os.getenv("MORTIMER_MONGO_DB", "alfredo"),
    "username": os.getenv("MORTIMER_MONGO_USERNAME"),
    "password": os.getenv("MORTIMER_MONGO_PASSWORD"),
    "authentication_source": os.getenv("MORTIMER_MONGO_AUTH_SOURCE", "admin"),
    "ssl": _env_bool("MORTIMER_MONGO_SSL", False),
}

ALFRED_DB = os.getenv("ALFRED_DB_NAME")
ALFRED_LOGFILE = os.getenv("ALFRED_LOGFILE")

# Mail settings
MAIL_USE = _env_bool("MORTIMER_MAIL_USE")
MAIL_SERVER = os.getenv("MORTIMER_MAIL_SERVER")
MAIL_PORT = os.getenv("MORTIMER_MAIL_PORT")
MAIL_USE_TLS = os.getenv("MORTIMER_MAIL_USE_TLS")
MAIL_USERNAME = os.getenv("MORTIMER_MAIL_USERNAME")
MAIL_PASSWORD = os.getenv("MORTIMER_MAIL_PASSWORD")
MAIL_SENDER_ADDRESS = os.getenv("MORTIMER_MAIL_SENDER_ADDRESS")

# Flask-Dropzone settings:
DROPZONE_ALLOWED_FILE_CUSTOM = True
DROPZONE_ALLOWED_FILE_TYPE = ".pdf, .png, .jpeg, .jpg, .gif, .txt, .xml, .pem, .mp3, .mp4, .ogg, .csv, .py, .xlsx, .md, .zip, .js"
DROPZONE_MAX_FILE_SIZE = 20
# DROPZONE_MAX_FILES = 5
DROPZONE_UPLOAD_ON_CLICK = True
DROPZONE_UPLOAD_BTN_ID = "upload"
DROPZONE_UPLOAD_MULTIPLE = True
DROPZONE_PARRALEL_UPLOADS = 20
DROPZONE_TIMEOUT = 300000 # 5 minutes